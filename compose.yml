services:
  frontend:
    image: code.rinderher.de/library/ise-recorder:latest
    build: frontend
    container_name: ise-recorder-frontend
    restart: unless-stopped
    ports:
      - 127.0.0.1:3000:3000
    environment:
      - ISE_RECORD_API_URL=http://localhost:8000

  backend:
    image: code.rinderher.de/library/ise-recorder-backend:latest
    build: backend
    container_name: ise-recorder-backend
    init: true
    restart: unless-stopped
    user: 1000:1000
    ports:
      - 127.0.0.1:8000:8000
    volumes:
      - ./data:/app/data
    command: --log-level debug
#    environment:
#      - ISE_RECORD_DESTDIR=/app/data
#      - ISE_RECORD_SMTP_SERVER=mail.example.com
#      - ISE_RECORD_SMTP_PORT=25
#      - ISE_RECORD_SMTP_LOCAL_HOSTNAME=ise-record.example.com
#      - ISE_RECORD_SMTP_USERNAME=user1
#      - ISE_RECORD_SMTP_PASSWORD=supersecure
#      - ISE_RECORD_SMTP_SENDER=ise-record@example.com
#      - ISE_RECORD_SMTP_STARTTLS=true
#      - ISE_RECORD_SMTP_ALLOWED_DOMAINS=[ "example.com", "example.org" ]
